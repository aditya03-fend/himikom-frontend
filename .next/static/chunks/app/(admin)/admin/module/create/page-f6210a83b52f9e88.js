(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{3291:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(3761).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3316:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var a=r(3338),l=r(1855),s=r.n(l),i=r(277),o=r(7807),n=r(7022),c=r(1063),d=r(3421),b=r.n(d),x=r(2062),u=r(591),f=r(3690),m=r(4128),h=r(9287),p=r(609),g=r(1770);let j=(0,r(3761).A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var v=r(7012),k=r(3291);r(3094);let y=(0,o.default)(()=>r.e(995).then(r.bind(r,9995)),{loadableGenerated:{webpack:()=>[9995]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"h-[500px] bg-zinc-900 animate-pulse rounded-xl"})});function N(){let e=(0,n.useRouter)(),[t,r]=(0,i.useState)(!1),[l,o]=(0,i.useState)("file"),[d,N]=(0,i.useState)(!1),w=(0,i.useRef)(null),[A,M]=(0,i.useState)({title:"",description:"",author:"",image:""}),[z,C]=(0,i.useState)([{title:"",content:""}]),q=e=>{if(!e.type.startsWith("image/"))return void alert("Mohon upload file gambar cover modul!");if(e.size>2097152)return void alert("Ukuran file terlalu besar! Maksimal 2MB.");let t=new FileReader;t.readAsDataURL(e),t.onloadend=()=>{M(e=>({...e,image:t.result}))}},B=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?N(!0):"dragleave"===e.type&&N(!1)},D=(e,t,r)=>{let a=[...z];a[e]={...a[e],[t]:r},C(a)},S=async t=>{t.preventDefault(),r(!0);let a=c.A.get("token");if(!A.title||!A.author||!A.image||z.some(e=>!e.title||!e.content)){alert("Mohon lengkapi semua field (Judul, Author, Cover, dan isi Bab)."),r(!1);return}let l={...A,chapters:z};try{let t=await fetch("https://aditya03-fend-himikom-backend.hf.space/api/module",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(l)});if(t.ok)alert("Modul & Bab berhasil dibuat!"),e.push("/admin/module");else{let e=await t.json();throw Error(e.message||"Gagal menyimpan")}}catch(e){console.error(e),alert(e.message||"Terjadi kesalahan saat menyimpan.")}finally{r(!1)}},T=(0,i.useMemo)(()=>({toolbar:[[{font:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","video"],["clean"]]}),[]);return(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 pb-20",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex items-center justify-between mb-8 sticky top-0 bg-black z-20 py-4 border-b border-white/10",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex items-center gap-4",children:[(0,a.jsx)(b(),{href:"/admin/module",className:"p-2 bg-zinc-900 rounded-full hover:bg-zinc-800 transition-colors",children:(0,a.jsx)(x.A,{size:20})}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1",children:[(0,a.jsx)("h1",{className:"jsx-37479556c62f81b1 text-2xl font-bold font-heading",children:"Buat Modul Baru"}),(0,a.jsx)("p",{className:"jsx-37479556c62f81b1 text-gray-400 text-sm",children:"Susun materi pembelajaran terstruktur."})]})]}),(0,a.jsxs)("button",{onClick:S,disabled:t,className:"jsx-37479556c62f81b1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center gap-2 disabled:opacity-50",children:[t?(0,a.jsx)(u.A,{className:"animate-spin"}):(0,a.jsx)(f.A,{size:18}),"PUBLISH MODUL"]})]}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)("div",{className:"jsx-37479556c62f81b1 lg:w-1/3 space-y-6",children:(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 bg-zinc-900 border border-white/10 p-6 rounded-xl sticky top-32",children:[(0,a.jsx)("h3",{className:"jsx-37479556c62f81b1 text-lg font-bold mb-4 text-blue-400",children:"Informasi Modul"}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 space-y-6",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1",children:[(0,a.jsx)("label",{className:"jsx-37479556c62f81b1 text-xs font-bold text-gray-500 uppercase",children:"Nama Modul"}),(0,a.jsx)("input",{type:"text",required:!0,placeholder:"Contoh: Belajar React dari Nol",value:A.title,onChange:e=>M({...A,title:e.target.value}),className:"jsx-37479556c62f81b1 w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none"})]}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1",children:[(0,a.jsx)("label",{className:"jsx-37479556c62f81b1 text-xs font-bold text-gray-500 uppercase",children:"Penulis"}),(0,a.jsx)("input",{type:"text",required:!0,placeholder:"Nama Instruktur",value:A.author,onChange:e=>M({...A,author:e.target.value}),className:"jsx-37479556c62f81b1 w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none"})]}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1",children:[(0,a.jsx)("label",{className:"jsx-37479556c62f81b1 text-xs font-bold text-gray-500 uppercase",children:"Deskripsi Singkat"}),(0,a.jsx)("textarea",{rows:4,required:!0,placeholder:"Tentang modul ini...",value:A.description,onChange:e=>M({...A,description:e.target.value}),className:"jsx-37479556c62f81b1 w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none"})]}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"jsx-37479556c62f81b1 text-xs font-bold text-gray-500 uppercase",children:"Cover Image"}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex bg-black/50 p-1 rounded-lg border border-white/5",children:[(0,a.jsxs)("button",{onClick:()=>o("file"),className:`jsx-37479556c62f81b1 p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"file"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,a.jsx)(m.A,{size:12})," Upload"]}),(0,a.jsxs)("button",{onClick:()=>o("url"),className:`jsx-37479556c62f81b1 p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"url"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,a.jsx)(h.A,{size:12})," URL"]})]})]}),A.image?(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 relative group rounded-lg overflow-hidden border border-white/10 bg-black h-40 mb-4",children:[(0,a.jsx)("img",{src:A.image,alt:"Preview",className:"jsx-37479556c62f81b1 w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:()=>M({...A,image:""}),className:"jsx-37479556c62f81b1 absolute top-2 right-2 bg-red-600/90 hover:bg-red-600 text-white p-1.5 rounded-full transition-all",children:(0,a.jsx)(p.A,{size:16})})]}):(0,a.jsx)(a.Fragment,{children:"file"===l?(0,a.jsxs)("div",{onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:e=>{e.preventDefault(),e.stopPropagation(),N(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&q(e.dataTransfer.files[0])},onClick:()=>w.current?.click(),className:`jsx-37479556c62f81b1 relative w-full h-40 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all ${d?"border-blue-500 bg-blue-500/10":"border-white/10 bg-black/30 hover:bg-black/50 hover:border-white/20"}`,children:[(0,a.jsx)("input",{ref:w,type:"file",accept:"image/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&q(e.target.files[0])},className:"jsx-37479556c62f81b1 hidden"}),(0,a.jsx)(g.A,{size:32,className:`mb-2 ${d?"text-blue-400":"text-gray-500"}`}),(0,a.jsx)("p",{className:"jsx-37479556c62f81b1 text-sm text-gray-400 font-medium",children:"Klik atau drop file"}),(0,a.jsx)("p",{className:"jsx-37479556c62f81b1 text-[10px] text-gray-600 mt-1",children:"Maks 2MB"})]}):(0,a.jsx)("input",{type:"url",placeholder:"https://...",value:A.image,onChange:e=>M({...A,image:e.target.value}),className:"jsx-37479556c62f81b1 w-full bg-black/50 border border-white/10 rounded-lg p-3 focus:border-blue-500 transition-all outline-none text-sm"})})]})]})]})}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 lg:w-2/3 space-y-8",children:[z.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 bg-zinc-900 border border-white/10 rounded-xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 bg-zinc-800/50 p-4 border-b border-white/10 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"jsx-37479556c62f81b1 p-2 bg-white/5 rounded cursor-grab active:cursor-grabbing",children:(0,a.jsx)(j,{size:16,className:"text-gray-500"})}),(0,a.jsxs)("span",{className:"jsx-37479556c62f81b1 font-bold text-sm text-gray-400",children:["BAB ",t+1]})]}),(0,a.jsx)("button",{onClick:()=>(e=>{if(1===z.length)return void alert("Minimal harus ada 1 bab!");let t=[...z];t.splice(e,1),C(t)})(t),title:"Hapus Bab Ini",className:"jsx-37479556c62f81b1 text-red-500 hover:bg-red-500/10 p-2 rounded transition-colors",children:(0,a.jsx)(v.A,{size:18})})]}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 p-6 space-y-6",children:[(0,a.jsx)("div",{className:"jsx-37479556c62f81b1",children:(0,a.jsx)("input",{type:"text",placeholder:`Judul Bab ${t+1}...`,value:e.title,onChange:e=>D(t,"title",e.target.value),className:"jsx-37479556c62f81b1 w-full bg-transparent border-b border-white/10 p-2 text-xl font-bold placeholder:text-gray-600 focus:border-blue-500 outline-none transition-all"})}),(0,a.jsxs)("div",{className:"jsx-37479556c62f81b1 text-editor-wrapper",children:[(0,a.jsx)("label",{className:"jsx-37479556c62f81b1 text-xs font-bold text-gray-500 uppercase block mb-2",children:"Konten Materi"}),(0,a.jsx)(y,{theme:"snow",value:e.content,onChange:e=>D(t,"content",e),modules:T,className:"bg-black/30 text-white rounded-lg overflow-hidden border border-white/10",placeholder:"Tulis materi di sini... Gunakan toolbar di atas untuk format teks & gambar."})]})]})]},t)),(0,a.jsxs)("button",{onClick:()=>{C([...z,{title:"",content:""}])},className:"jsx-37479556c62f81b1 w-full py-6 border-2 border-dashed border-white/10 rounded-xl flex items-center justify-center gap-2 text-gray-500 hover:text-white hover:border-blue-500/50 hover:bg-blue-500/5 transition-all group",children:[(0,a.jsx)("div",{className:"jsx-37479556c62f81b1 w-8 h-8 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-blue-500 group-hover:text-white transition-colors",children:(0,a.jsx)(k.A,{size:18})}),(0,a.jsx)("span",{className:"jsx-37479556c62f81b1 font-bold text-sm",children:"TAMBAH BAB BARU"})]})]})]}),(0,a.jsx)(s(),{id:"37479556c62f81b1",children:".ql-toolbar{background-color:#18181b;border-color:#27272a!important;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.ql-container{border-color:#27272a!important;border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem;font-size:16px;min-height:300px}.ql-editor{min-height:300px}.ql-stroke{stroke:#a1a1aa!important}.ql-fill{fill:#a1a1aa!important}.ql-picker{color:#a1a1aa!important}.ql-picker-label{color:#a1a1aa!important}.ql-picker-options{background-color:#18181b!important;border-color:#3f3f46!important;color:#e4e4e7!important}.ql-picker-item{color:#a1a1aa!important}.ql-picker-item:hover{color:#fff!important;background-color:#27272a}.ql-editor.ql-blank::before{color:#52525b!important;font-style:normal}.ql-snow .ql-editor pre.ql-syntax{background-color:#09090b!important;color:#4ade80!important;border:1px solid#27272a;border-radius:.5rem;padding:1rem}"})]})}},5618:(e,t,r)=>{Promise.resolve().then(r.bind(r,3316))},7012:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(3761).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[43,461,863,218,144,358],()=>e(e.s=5618)),_N_E=e.O()}]);
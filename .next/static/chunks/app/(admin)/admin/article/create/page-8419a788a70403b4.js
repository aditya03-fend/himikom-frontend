(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{3853:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>v});var r=t(3338),l=t(1855),s=t.n(l),i=t(277),o=t(7807),n=t(7022),d=t(1063),c=t(3421),b=t.n(c),x=t(2062),u=t(591),f=t(3690),m=t(4128),p=t(9287),h=t(609),g=t(1770);t(3094);let j=(0,o.default)(()=>t.e(995).then(t.bind(t,9995)),{loadableGenerated:{webpack:()=>[9995]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"h-[500px] bg-zinc-900 animate-pulse rounded-xl"})});function v(){let e=(0,n.useRouter)(),[a,t]=(0,i.useState)(!1),[l,o]=(0,i.useState)("file"),[c,v]=(0,i.useState)(!1),k=(0,i.useRef)(null),[N,w]=(0,i.useState)({title:"",image:"",author:"",content:""}),y=e=>{if(!e.type.startsWith("image/"))return void alert("Mohon upload file gambar untuk cover artikel!");if(e.size>2097152)return void alert("Ukuran file terlalu besar! Maksimal 2MB.");let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{w(e=>({...e,image:a.result}))}},q=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?v(!0):"dragleave"===e.type&&v(!1)},z=async a=>{a.preventDefault(),t(!0);let r=d.A.get("token");if(!N.title||!N.content||!N.author||!N.image){alert("Judul, Author, Konten, dan Cover Image wajib diisi!"),t(!1);return}try{let a=await fetch("https://aditya03-fend-himikom-backend.hf.space/api/article",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(N)});if(!a.ok){let e=await a.json();throw Error(e.message||"Gagal menyimpan artikel")}alert("Artikel berhasil dibuat!"),e.push("/admin/article")}catch(e){console.error(e),alert(e.message||"Terjadi kesalahan saat menyimpan.")}finally{t(!1)}},A=(0,i.useMemo)(()=>({toolbar:[[{font:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","video"],["clean"]]}),[]);return(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d pb-20",children:[(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d flex items-center justify-between mb-8 sticky top-0 bg-black z-20 py-4 border-b border-white/10",children:[(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d flex items-center gap-4",children:[(0,r.jsx)(b(),{href:"/admin/article",className:"p-2 bg-zinc-900 rounded-full hover:bg-zinc-800 transition-colors",children:(0,r.jsx)(x.A,{size:20})}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d",children:[(0,r.jsx)("h1",{className:"jsx-fe1b3ea59364502d text-2xl font-bold font-heading",children:"Tulis Artikel Baru"}),(0,r.jsx)("p",{className:"jsx-fe1b3ea59364502d text-gray-400 text-sm",children:"Bagikan wawasan dan berita terbaru."})]})]}),(0,r.jsxs)("button",{onClick:z,disabled:a,className:"jsx-fe1b3ea59364502d bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center gap-2 disabled:opacity-50",children:[a?(0,r.jsx)(u.A,{className:"animate-spin"}):(0,r.jsx)(f.A,{size:18}),"PUBLISH"]})]}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("div",{className:"jsx-fe1b3ea59364502d lg:w-2/3 order-2 lg:order-1",children:(0,r.jsx)("div",{className:"jsx-fe1b3ea59364502d bg-zinc-900 border border-white/10 rounded-xl overflow-hidden min-h-[500px] flex flex-col",children:(0,r.jsx)(j,{theme:"snow",value:N.content,onChange:e=>w({...N,content:e}),modules:A,placeholder:"Mulai menulis cerita inspiratif di sini...",className:"flex-1 text-white bg-black/30"})})}),(0,r.jsx)("div",{className:"jsx-fe1b3ea59364502d lg:w-1/3 order-1 lg:order-2 space-y-6",children:(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d bg-zinc-900 border border-white/10 p-6 rounded-xl sticky top-32",children:[(0,r.jsx)("h3",{className:"jsx-fe1b3ea59364502d text-lg font-bold mb-4 text-purple-400",children:"Detail Artikel"}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d space-y-6",children:[(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d",children:[(0,r.jsx)("label",{className:"jsx-fe1b3ea59364502d text-xs font-bold text-gray-500 uppercase",children:"Judul Artikel"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"Judul yang menarik...",value:N.title,onChange:e=>w({...N,title:e.target.value}),className:"jsx-fe1b3ea59364502d w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none text-white font-bold text-lg"})]}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d",children:[(0,r.jsx)("label",{className:"jsx-fe1b3ea59364502d text-xs font-bold text-gray-500 uppercase",children:"Penulis / Author"}),(0,r.jsx)("input",{type:"text",required:!0,placeholder:"Nama Penulis",value:N.author,onChange:e=>w({...N,author:e.target.value}),className:"jsx-fe1b3ea59364502d w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none"})]}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d",children:[(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d flex items-center justify-between mb-2",children:[(0,r.jsx)("label",{className:"jsx-fe1b3ea59364502d text-xs font-bold text-gray-500 uppercase",children:"Cover Image"}),(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d flex bg-black/50 p-1 rounded-lg border border-white/5",children:[(0,r.jsxs)("button",{onClick:()=>o("file"),className:`jsx-fe1b3ea59364502d p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"file"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,r.jsx)(m.A,{size:12})," Upload"]}),(0,r.jsxs)("button",{onClick:()=>o("url"),className:`jsx-fe1b3ea59364502d p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"url"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,r.jsx)(p.A,{size:12})," URL"]})]})]}),N.image?(0,r.jsxs)("div",{className:"jsx-fe1b3ea59364502d relative group rounded-lg overflow-hidden border border-white/10 bg-black h-36 mb-4",children:[(0,r.jsx)("img",{src:N.image,alt:"Preview",className:"jsx-fe1b3ea59364502d w-full h-full object-cover opacity-90"}),(0,r.jsx)("button",{onClick:()=>w({...N,image:""}),className:"jsx-fe1b3ea59364502d absolute top-2 right-2 bg-red-600/90 hover:bg-red-600 text-white p-1.5 rounded-full transition-all",children:(0,r.jsx)(h.A,{size:16})})]}):(0,r.jsx)(r.Fragment,{children:"file"===l?(0,r.jsxs)("div",{onDragEnter:q,onDragLeave:q,onDragOver:q,onDrop:e=>{e.preventDefault(),e.stopPropagation(),v(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&y(e.dataTransfer.files[0])},onClick:()=>k.current?.click(),className:`jsx-fe1b3ea59364502d relative w-full h-36 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all ${c?"border-blue-500 bg-blue-500/10":"border-white/10 bg-black/30 hover:bg-black/50 hover:border-white/20"}`,children:[(0,r.jsx)("input",{ref:k,type:"file",accept:"image/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&y(e.target.files[0])},className:"jsx-fe1b3ea59364502d hidden"}),(0,r.jsx)(g.A,{size:32,className:`mb-2 ${c?"text-blue-400":"text-gray-500"}`}),(0,r.jsx)("p",{className:"jsx-fe1b3ea59364502d text-sm text-gray-400 font-medium",children:"Klik atau drop cover di sini"}),(0,r.jsx)("p",{className:"jsx-fe1b3ea59364502d text-[10px] text-gray-600 mt-1",children:"Max 2MB (JPG/PNG)"})]}):(0,r.jsx)("input",{type:"url",placeholder:"https://example.com/cover-image.jpg",value:N.image,onChange:e=>w({...N,image:e.target.value}),className:"jsx-fe1b3ea59364502d w-full bg-black/50 border border-white/10 rounded-lg p-3 focus:border-blue-500 transition-all outline-none text-sm"})})]})]})]})})]}),(0,r.jsx)(s(),{id:"fe1b3ea59364502d",children:".ql-toolbar{background-color:#18181b;border-color:#27272a!important;border-top-left-radius:.75rem;border-top-right-radius:.75rem}.ql-container{border-color:#27272a!important;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;font-size:16px;min-height:500px}.ql-editor{min-height:500px}.ql-stroke{stroke:#a1a1aa!important}.ql-fill{fill:#a1a1aa!important}.ql-picker{color:#a1a1aa!important}.ql-picker-label{color:#a1a1aa!important}.ql-picker-options{background-color:#18181b!important;border-color:#3f3f46!important;color:#e4e4e7!important}.ql-picker-item{color:#a1a1aa!important}.ql-picker-item:hover{color:#fff!important;background-color:#27272a}.ql-editor.ql-blank::before{color:#52525b!important;font-style:normal}.ql-snow .ql-editor pre.ql-syntax{background-color:#09090b!important;color:#4ade80!important;border:1px solid#27272a;border-radius:.5rem;padding:1rem}"})]})}},6998:(e,a,t)=>{Promise.resolve().then(t.bind(t,3853))}},e=>{e.O(0,[43,461,863,218,144,358],()=>e(e.s=6998)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{1208:(e,a,r)=>{Promise.resolve().then(r.bind(r,1367))},1367:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>k});var t=r(3338),l=r(1855),s=r.n(l),o=r(277),i=r(7807),n=r(7022),c=r(1063),d=r(3421),f=r.n(d),x=r(2062),b=r(591),m=r(3690),p=r(4128),u=r(9287),g=r(609),h=r(1770);r(3094);let j=(0,i.default)(()=>r.e(995).then(r.bind(r,9995)),{loadableGenerated:{webpack:()=>[9995]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-[500px] bg-zinc-900 animate-pulse rounded-xl"})});function k(){let e=(0,n.useRouter)(),[a,r]=(0,o.useState)(!1),[l,i]=(0,o.useState)("file"),[d,k]=(0,o.useState)(!1),v=(0,o.useRef)(null),[N,w]=(0,o.useState)({title:"",content:"",image:""}),y=e=>{if(!e.type.startsWith("image/"))return void alert("Mohon upload file gambar saja!");let a=new FileReader;a.readAsDataURL(e),a.onloadend=()=>{w(e=>({...e,image:a.result}))}},q=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?k(!0):"dragleave"===e.type&&k(!1)},z=async a=>{a.preventDefault(),r(!0);let t=c.A.get("token");if(!N.title||!N.content||!N.image){alert("Mohon lengkapi semua data (Judul, Konten, Gambar)!"),r(!1);return}try{let a=await fetch("https://aditya03-fend-himikom-backend.hf.space/api/program",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(N)});if(!a.ok){let e=await a.json();throw Error(e.message||"Gagal menyimpan program")}alert("Program Kerja berhasil dibuat!"),e.push("/admin/program")}catch(e){console.error(e),alert(e.message||"Terjadi kesalahan saat menyimpan.")}finally{r(!1)}},C=(0,o.useMemo)(()=>({toolbar:[[{font:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["link","image","video"],["clean"]]}),[]);return(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff pb-20",children:[(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff flex items-center justify-between mb-8 sticky top-0 bg-black z-20 py-4 border-b border-white/10",children:[(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff flex items-center gap-4",children:[(0,t.jsx)(f(),{href:"/admin/program",className:"p-2 bg-zinc-900 rounded-full hover:bg-zinc-800 transition-colors",children:(0,t.jsx)(x.A,{size:20})}),(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff",children:[(0,t.jsx)("h1",{className:"jsx-48826f84c17185ff text-2xl font-bold font-heading",children:"Program Kerja Baru"}),(0,t.jsx)("p",{className:"jsx-48826f84c17185ff text-gray-400 text-sm",children:"Rencanakan kegiatan unggulan himpunan."})]})]}),(0,t.jsxs)("button",{onClick:z,disabled:a,className:"jsx-48826f84c17185ff bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-all flex items-center gap-2 disabled:opacity-50",children:[a?(0,t.jsx)(b.A,{className:"animate-spin"}):(0,t.jsx)(m.A,{size:18}),"SIMPAN PROGRAM"]})]}),(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff flex flex-col lg:flex-row gap-8",children:[(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff lg:w-2/3 order-2 lg:order-1",children:[(0,t.jsx)("label",{className:"jsx-48826f84c17185ff text-xs font-bold text-gray-500 uppercase block mb-2",children:"Deskripsi Lengkap Kegiatan"}),(0,t.jsx)("div",{className:"jsx-48826f84c17185ff bg-zinc-900 border border-white/10 rounded-xl overflow-hidden min-h-[500px] flex flex-col",children:(0,t.jsx)(j,{theme:"snow",value:N.content,onChange:e=>w({...N,content:e}),modules:C,placeholder:"Jelaskan detail acara, tujuan, target peserta, dll...",className:"flex-1 text-white bg-black/30"})})]}),(0,t.jsx)("div",{className:"jsx-48826f84c17185ff lg:w-1/3 order-1 lg:order-2 space-y-6",children:(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff bg-zinc-900 border border-white/10 p-6 rounded-xl sticky top-32",children:[(0,t.jsx)("h3",{className:"jsx-48826f84c17185ff text-lg font-bold mb-4 text-blue-400",children:"Informasi Dasar"}),(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff space-y-6",children:[(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff",children:[(0,t.jsx)("label",{className:"jsx-48826f84c17185ff text-xs font-bold text-gray-500 uppercase",children:"Nama Program"}),(0,t.jsx)("input",{type:"text",required:!0,placeholder:"Contoh: Workshop UI/UX",value:N.title,onChange:e=>w({...N,title:e.target.value}),className:"jsx-48826f84c17185ff w-full bg-black/50 border border-white/10 rounded-lg p-3 mt-1 focus:border-blue-500 transition-all outline-none text-white font-bold"})]}),(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff",children:[(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff flex items-center justify-between mb-2",children:[(0,t.jsx)("label",{className:"jsx-48826f84c17185ff text-xs font-bold text-gray-500 uppercase",children:"Poster / Banner"}),(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff flex bg-black/50 p-1 rounded-lg border border-white/5",children:[(0,t.jsxs)("button",{onClick:()=>i("file"),className:`jsx-48826f84c17185ff p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"file"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,t.jsx)(p.A,{size:12})," Upload"]}),(0,t.jsxs)("button",{onClick:()=>i("url"),className:`jsx-48826f84c17185ff p-1 px-2 rounded text-[10px] font-bold transition-all flex items-center gap-1 ${"url"===l?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:[(0,t.jsx)(u.A,{size:12})," URL"]})]})]}),N.image?(0,t.jsxs)("div",{className:"jsx-48826f84c17185ff relative group rounded-lg overflow-hidden border border-white/10 bg-black h-48 mb-4",children:[(0,t.jsx)("img",{src:N.image,alt:"Preview",className:"jsx-48826f84c17185ff w-full h-full object-cover"}),(0,t.jsx)("button",{onClick:()=>w({...N,image:""}),className:"jsx-48826f84c17185ff absolute top-2 right-2 bg-red-600/90 hover:bg-red-600 text-white p-1.5 rounded-full transition-all",children:(0,t.jsx)(g.A,{size:16})})]}):(0,t.jsx)(t.Fragment,{children:"file"===l?(0,t.jsxs)("div",{onDragEnter:q,onDragLeave:q,onDragOver:q,onDrop:e=>{e.preventDefault(),e.stopPropagation(),k(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&y(e.dataTransfer.files[0])},onClick:()=>v.current?.click(),className:`jsx-48826f84c17185ff relative w-full h-40 border-2 border-dashed rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all ${d?"border-blue-500 bg-blue-500/10":"border-white/10 bg-black/30 hover:bg-black/50 hover:border-white/20"}`,children:[(0,t.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files[0]&&y(e.target.files[0])},className:"jsx-48826f84c17185ff hidden"}),(0,t.jsx)(h.A,{size:32,className:`mb-2 ${d?"text-blue-400":"text-gray-500"}`}),(0,t.jsx)("p",{className:"jsx-48826f84c17185ff text-sm text-gray-400 font-medium",children:"Klik atau drop file di sini"}),(0,t.jsx)("p",{className:"jsx-48826f84c17185ff text-[10px] text-gray-600 mt-1",children:"Maks 2MB (JPG/PNG)"})]}):(0,t.jsx)("input",{type:"url",placeholder:"https://example.com/image.jpg",value:N.image,onChange:e=>w({...N,image:e.target.value}),className:"jsx-48826f84c17185ff w-full bg-black/50 border border-white/10 rounded-lg p-3 focus:border-blue-500 transition-all outline-none text-sm"})})]})]})]})})]}),(0,t.jsx)(s(),{id:"48826f84c17185ff",children:".ql-toolbar{background-color:#18181b;border-color:#27272a!important;border-top-left-radius:.75rem;border-top-right-radius:.75rem}.ql-container{border-color:#27272a!important;border-bottom-left-radius:.75rem;border-bottom-right-radius:.75rem;font-size:16px;min-height:500px}.ql-editor{min-height:500px}.ql-stroke{stroke:#a1a1aa!important}.ql-fill{fill:#a1a1aa!important}.ql-picker{color:#a1a1aa!important}.ql-picker-label{color:#a1a1aa!important}.ql-picker-options{background-color:#18181b!important;border-color:#3f3f46!important;color:#e4e4e7!important}.ql-picker-item{color:#a1a1aa!important}.ql-picker-item:hover{color:#fff!important;background-color:#27272a}.ql-editor.ql-blank::before{color:#52525b!important;font-style:normal}.ql-snow .ql-editor pre.ql-syntax{background-color:#09090b!important;color:#4ade80!important;border:1px solid#27272a;border-radius:.5rem;padding:1rem}"})]})}}},e=>{e.O(0,[43,461,863,218,144,358],()=>e(e.s=1208)),_N_E=e.O()}]);